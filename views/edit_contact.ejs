<% include partials/header %>
<% if(search_query === undefined){var search_query = "";} %>
<div class="container">
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="/">Contact Manager</a>
        <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
            <li class="nav-item active">
                <a href="/addpage" class="btn btn-success">Create Contact</a>
            </li>
        </ul>
        <form class="form-inline" action="/" method="GET">
            <input type="text" class="form-control mr-sm-2" type="search" placeholder="Search" value="" name="search" id="searchValue" required>
            <button class="btn btn-outline-success my-2 my-sm-0" type="submit" id="searchbutton">Search</button>
        </form>
    </nav>
</div>

<br />
<div class="container">
    <form action="/edit/<%= contact_id %>" method="POST" id="formID">
        <div class="form-row">
            <h5>Edit Contact - <%= contact_id %></h5>
        </div>
        <div class="form-row">
            <div class="form-group col-md-4">
                <input type="text" value="<%= contact_name.fname %>" class="form-control" id="fname" name="fname"
                    placeholder="First Name">
            </div>
            <div class="form-group col-md-4">
                <input type="text" value="<%= contact_name.mname %>" class="form-control" id="mname" name="mname"
                    placeholder="Middle Name">
            </div>
            <div class="form-group col-md-4">
                <input type="text" value="<%= contact_name.lname %>" class="form-control" id="lname" name="lname"
                    placeholder="Last name">
            </div>
        </div>
        <div class="form-row ">
            <div class="form-group col-md-12">
                <button type="button" class="btn btn-success" id="addAddress">+ Add Address</button>
            </div>
        </div>
        
        <div id="existingAddresshere">
            <%for(var addr of address){%>
            <div id="address_existing" class="form-group">
                <div class="form-row">
                    <div class="form-group col-md-3">
                        <input list="addressType" placeholder='Type' name="e_address[][address_type]" value="<%= addr.address_type %>" class="form-control">
                        <div class="invalid-feedback">address type - alphanumeric (max len = 10)</div>
                        <datalist id="addressType">
                            <option value="home">
                            <option value="work">
                        </datalist>
                    </div>
                    <div class="form-group col-md-8">
                        <input type="text" class="form-control" id="inputAddress" value="<%= addr.address_line %>" name="e_address[][address_line]"
                            placeholder="Address" value="">
                        <div class="invalid-feedback">address line - max len = 100</div>
                    </div>
                    <div class="form-group col-md-1">
                        <button type="button" class="btn btn-danger" id="deleteAddress_existing" value="<%= addr.address_id %>"> X </button>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group col-md-5">
                        <input type="text" class="form-control" placeholder="City" id="inputCity" value="<%= addr.city %>"
                            name="e_address[][city]">
                            <div class="invalid-feedback">city - alphanumeric (max len = 20)</div>
                    </div>
                    <div class="form-group col-md-4">
                        <input type="text" class="form-control" placeholder="State" id="inputState" value="<%= addr.state %>"
                            name="e_address[][state]">
                            <div class="invalid-feedback">state - alphanumeric (max len = 20)</div>
                    </div>
                    <div class="form-group col-md-2">
                        <input type="text" class="form-control" placeholder="Zip" id="inputZip" value="<%= addr.zip %>"
                            name="e_address[][zip]">
                            <div class="invalid-feedback">zip code - 5 or 6 digits</div>
                    </div>
                    <div class="form-group col-md-1">
                        <input type="text" class="form-control" value="<%= addr.address_id %>" name="e_address[][address_id]"
                            placeholder="AddressID" style="display:none">
                    </div>
                </div>
            </div><!-- Address -->
            <%} %>
        </div>
        <div id="address_to_delete"></div>
        
        <div id="cloneAddresshere">
            <!-- Address -->
        </div>

        <!-- PHONE -->
        <div class="form-row">
            <div class="form-group col-md-2">
                <button type="button" class="btn btn-success" id="addPhone">+ Add Phone</button>
            </div>
        </div>
        
        <div id="existingPhonehere">
            <%for(var ph of phone){%>
            <div id="phone_existing" class="form-group">
                <div class="form-row">
                    <div class="form-group col-md-3">
                        <input list="PhoneType" value="<%= ph.phone_type %>" name="e_phone[][phone_type]" class="form-control" placeholder='Type'>
                        <div class="invalid-feedback">phone type - alphanumeric (max len = 10)</div>
                        <datalist id="PhoneType">
                            <option value="cell">
                            <option value="home">
                            <option value="work">
                        </datalist>
                    </div>
                    <div class="form-group col-md-6">
                        <input type="tel" value="<%= ph.area_code + ph.number %>" class="form-control" id="inputPhone" name="e_phone[][phone]"
                            placeholder="Phone">
                            <div class="invalid-feedback">phone - 10 digits</div>
                    </div>
                    <div class="form-group col-md-1">
                        <button type="button" class="btn btn-danger" id="deletePhone_existing" value="<%= ph.phone_id %>"> X </button>
                    </div>
                    <div class="form-group col-md-1">
                        <input type="text" class="form-control" value="<%= ph.phone_id %>" name="e_phone[][phone_id]"
                            placeholder="PhoneID" style="display:none">
                    </div>
                </div>
            </div> <!-- Phone -->
            <%} %>
        </div>
        
        <div id="phone_to_delete"></div>
        
        <div id="clonePhonehere">
            <!-- Phone -->
        </div>

        <!-- EVENT -->
        <div class="form-row">
            <div class="form-group col-md-2">
                <button type="button" class="btn btn-success" id="addEvent">+ Add Event</button>
            </div>
        </div>
        
        <div id="existingEventhere">
            <%for(var dt of date){%>
            <div id="event_existing" class="form-group">
                <div class="form-row">
                    <div class="form-group col-md-3">
                        <input list="EventType" value="<%= dt.date_type %>" placeholder='Type' name="e_event[][date_type]" class="form-control">
                        <div class="invalid-feedback">event type - alphanumeric (max len = 10)</div>
                        <datalist id="EventType">
                            <option value="birthday">
                        </datalist>
                    </div>
                    <div class="form-group col-md-6">
                        <input type="date" value="<%=dt.date%>" class="form-control" id="inputEvent" name="e_event[][date]">
                        <div class="invalid-feedback">Please choose a date for this event</div>
                    </div>
                    <div class="form-group col-md-1">
                        <button type="button" class="btn btn-danger" id="deleteEvent_existing" value="<%= dt.date_id %>"> X </button>
                    </div>
                    <div class="form-group col-md-1">
                        <input type="text" class="form-control" value="<%= dt.date_id %>" name="e_event[][date_id]"
                            placeholder="DateID" style="display:none">
                    </div>
                </div>
            </div> <!-- Event -->
            <%} %>
        </div>
        
        <div id="date_to_delete"></div>
        
        <div id="cloneEventhere">
            <!-- Event -->
        </div>
        <div class="">
            <button type="submit" id="createcontact" class="btn btn-primary">Modify Contact</button>
        </div>
    </form>
</div>
<% include partials/footer %>