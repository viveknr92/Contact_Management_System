<% include partials/header %>

<div class="container">
    <div class="jumbotron-fluid">
        <h1 style="text-align: center">Contact Manager</h1>
        <form action="/" method="GET">
            <div class="form-group">
                <input type="text" class="form-control" placeholder="Search" name="search" id="searchValue">
            </div>
            <div style="text-align: center">
                <button type="submit" class="btn btn-default" id="searchbutton">Search</button>
            </div>
        </form>
    </div>
    <hr>
    <div class="row">
        <form action="/add">
            <button type="submit" class="btn btn-primary">Create New Contact</button>
        </form>
    </div>
    <br/>
    <div class="row">
        <table class="table table-bordered">
            <thead class="thead-light">
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">First Name</th>
                    <th scope="col">Middle Name</th>
                    <th scope="col">Last Name</th>
                    <th scope="col"></th>
                </tr>
            </thead>
            <tbody id="searchQuery">
            <% if (result != null && result.length > 0) {%>
            <% console.log("view : " + result[0].fname); %>
            <% result.forEach((r, index) => { %>
                    <tr>
                        <% console.log("view 2: " + r); %>
                        <td><%= r.contact_id %></td>
                        <td><%= r.fname %></td>
                        <td><%= r.mname %></td>
                        <td><%= r.lname %></td>
                        <td><a href="" target="_blank" rel="noopener" class="btn btn-sm btn-success">Edit</a>
                            <a href="" class="btn btn-sm btn-danger">Delete</a></td>
                    </tr>
                    <% }) %>
            </tbody>
        </table>
        <% } else { %>
            <p>No players found</p>
        <% } %>
    </div>
</div>

<% include partials/footer %>