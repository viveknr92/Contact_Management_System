<% include partials/header %>
<% if(search_query === undefined){var search_query = "";} %>

<div class="container">
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="/">Contact Manager</a>
        <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
            <li class="nav-item active">
                <a href="/addpage" class="btn btn-success">Create Contact</a>
            </li>
        </ul>
        <form class="form-inline" action="/" method="GET">
            <input type="text" class="form-control mr-sm-2" type="search" placeholder="Search" value="<%= search_query %>" name="search" id="searchValue" required>
            <button class="btn btn-outline-success my-2 my-sm-0" type="submit" id="searchbutton">Search</button>
        </form>
    </nav>
</div>
<div class="container">
    <h6 style="text-align:right"><%= comment %></h6>
    <div class="row">
    <% if (search_result != null && search_result.length > 0) {%>
        <table class="table table-bordered table-striped">
            <thead class="thead-light">
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">First Name</th>
                    <th scope="col">Middle Name</th>
                    <th scope="col">Last Name</th>
                    <th scope="col">Action</th>
                </tr>
            </thead>
            <tbody id="searchQuery">
                
                <% console.log("view : " + search_result[0].fname); %>
                <% console.log("query : " + search_query); %>
                <% var editvar = null;  %>
                <% for(r of search_result) { %>
                <tr>
                    <td>
                        <%= r.contact_id %>
                    </td>
                    <td>
                        <%= r.fname %>
                    </td>
                    <td>
                        <%= r.mname %>
                    </td>
                    <td>
                        <%= r.lname %>
                    </td>
                    <td><a href="/addpage?edit=<%= r.contact_id %>" class="btn btn-sm btn-success" id="editButton">Edit</a>
                    <a href="#" data-href="/delete/<%= r.contact_id %>" class="btn btn-sm btn-danger" id="deleteButton"data-toggle="modal" data-target="#confirm-delete">Delete</a></td>
                </tr>
                <% } %>
            </tbody>
        </table>
        <% } %>
    </div>
</div>

<div class="modal fade" id="confirm-delete" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                Delete Contact
            </div>
            <div class="modal-body">
                Confirm Delete Contact ?
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                <a class="btn btn-danger btn-ok">Delete</a>
            </div>
        </div>
    </div>
</div>

<% include partials/footer %>